function cacheResource(url,content){try{localStorage.setItem(`cached_${url}`,JSON.stringify({content,timestamp:Date.now()}))}catch(e){console.log('缓存失败:',e)}}function getCachedResource(url){try{const item=localStorage.getItem(`cached_${url}`);if(item){return JSON.parse(item).content}}catch(e){console.log('获取缓存失败:',e)}return null}async function preloadAndCache(){const cssUrl='main.css';const cachedCss=getCachedResource(cssUrl);if(!cachedCss){try{const response=await fetch(cssUrl);if(response.ok){const css=await response.text();cacheResource(cssUrl,css)}}catch(e){console.log('CSS加载失败:',e)}}const appJsUrl='app.js';const cachedAppJs=getCachedResource(appJsUrl);if(!cachedAppJs){try{const response=await fetch(appJsUrl);if(response.ok){const js=await response.text();cacheResource(appJsUrl,js)}}catch(e){console.log('JS加载失败:',e)}}const dataUrl='data.js';const cachedData=getCachedResource(dataUrl);if(!cachedData){try{const response=await fetch(dataUrl);if(response.ok){const data=await response.text();cacheResource(dataUrl,data)}}catch(e){console.log('数据加载失败:',e)}}}function renderList(items){const listContainer=document.getElementById('list');listContainer.innerHTML='';if(items.length===0){const emptyItem=document.createElement('div');emptyItem.className='empty';emptyItem.textContent='没有找到匹配的结果';emptyItem.style.textAlign='center';emptyItem.style.padding='20px';emptyItem.style.color='#666';listContainer.appendChild(emptyItem);return}items.forEach(item=>{const[info,phone]=item.split('+');const namePart=info;const listItem=document.createElement('div');listItem.className='item';const nameElement=document.createElement('span');nameElement.className='name';nameElement.textContent=namePart;const phoneElement=document.createElement('a');phoneElement.className='phone';phoneElement.href=`tel:${phone}`;phoneElement.textContent=phone;listItem.appendChild(nameElement);listItem.appendChild(phoneElement);listContainer.appendChild(listItem)})}function setupSearch(){const searchInput=document.getElementById('searchInput');searchInput.addEventListener('input',(e)=>{const searchTerm=e.target.value.trim().toLowerCase();if(!searchTerm){renderList(data);return}const filteredData=data.filter(item=>{const[info,phone]=item.split('+');return info.toLowerCase().includes(searchTerm)||phone.toLowerCase().includes(searchTerm)});renderList(filteredData)})}document.addEventListener('DOMContentLoaded',()=>{renderList(data);setupSearch();preloadAndCache()});